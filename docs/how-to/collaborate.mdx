---
id: collaborate
title: Collaborate
---

This is a stub, and will be improved later on.

### Basics

Any user can open a graph if they can view it. All users viewing a graph will
receive updates immediately from ZefHub when they are made by a process with
"primary role" on the graph.

Only one process can have primary role and append directly to a graph. Other
processes may send "merge requests" to the graph. 

By default, any new graphs created by a user give that user full rights, and all
other users no rights. Hence, collaboration is entirely about access rights to a
graph.

For convenience a graph should also be tagged, so that it does not have to
referred to by its uid:

```python
tag(g, "some-tag")
# Removing tag
tag(g, "some-tag", adding=False)
# Stealing a tag from a different graph (only if rights permit)
tag(g, "some-tag", True)
```

### User rights

Users have three rights available:

- `AllowView`: user can view (read) a graph.
- `AllowAppend`: user can append (write) to a graph. This includes merges.
- `AllowDiscover`: user can see graph in a `zearch`.
- `AllowModifyRights`: user can modify the rights of a graph/group.

Users can also belong a group. Users inherit all rights from the groups they are
members of. All users are members of the `everyone` group by default.

Adding a right to a user or a group:

```python
from zef.admins import *
add_right("user:someuser", "graph:targetgraphtag", "AllowView")
add_right("group:everyone", "graph:01234567890123456789012345678901", "AllowDiscover")
```

Removing a right:
```python
remove_right("user:someuser", "graph:targetgraphtag", "AllowView")
remove_right("group:everyone", "graph:01234567890123456789012345678901", "AllowDiscover")
```

### Other rights

These rights need more documenting:

- `AllowAddUser`, `AllowRemoveUser`, `AllowAddGroup`: admin-only privleges. Can
  be used for general adding or adding user to a group.
  
### Groups

Other commands:

```python
add_group_member("someuser", "somegroup")
remove_group_member("someuser", "somegroup")

add_right("user:someuser", "group:somegroup", "AllowModifyRights")
```

### Admin-only

- `add_user`
- `disable_user`
- `enable_user`
- `add_group`

